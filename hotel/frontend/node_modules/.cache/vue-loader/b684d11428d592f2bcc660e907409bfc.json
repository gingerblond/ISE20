{"remainingRequest":"C:\\Users\\Elly\\Desktop\\ISE_10.01.2020\\ISE20\\hotel\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Elly\\Desktop\\ISE_10.01.2020\\ISE20\\hotel\\frontend\\src\\components\\EditReservation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Elly\\Desktop\\ISE_10.01.2020\\ISE20\\hotel\\frontend\\src\\components\\EditReservation.vue","mtime":1610317135537},{"path":"C:\\Users\\Elly\\Desktop\\ISE_10.01.2020\\ISE20\\hotel\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610313755472},{"path":"C:\\Users\\Elly\\Desktop\\ISE_10.01.2020\\ISE20\\hotel\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1610313727092},{"path":"C:\\Users\\Elly\\Desktop\\ISE_10.01.2020\\ISE20\\hotel\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610313755472},{"path":"C:\\Users\\Elly\\Desktop\\ISE_10.01.2020\\ISE20\\hotel\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1610313859415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJFZGl0UmVzZXJ2YXRpb24iLA0KICBtZXRob2RzOiB7DQogICAgc2V0RGF0YSgpIHsNCiAgICAgIHRoaXMuZm9ybS5yZXNlcnZhdGlvbklEID0gdGhpcy5wYXJlbnREYXRhLnJlc2VydmF0aW9uSUQ7DQogICAgICB0aGlzLmZvcm0uY3VzdG9tZXIuY3VzdG9tZXJJZCA9IHRoaXMucGFyZW50RGF0YS5jdXN0b21lci5jdXN0b21lcklkOw0KICAgICAgdGhpcy5mb3JtLmN1c3RvbWVyLmZpcnN0TmFtZSA9IHRoaXMucGFyZW50RGF0YS5jdXN0b21lci5maXJzdE5hbWU7DQogICAgICB0aGlzLmZvcm0uY3VzdG9tZXIubGFzdE5hbWUgPSB0aGlzLnBhcmVudERhdGEuY3VzdG9tZXIubGFzdE5hbWU7DQogICAgICB0aGlzLmZvcm0uY3VzdG9tZXIuaWRDYXJkID0gdGhpcy5wYXJlbnREYXRhLmN1c3RvbWVyLmlkQ2FyZDsNCg0KICAgIH0sDQogICAgb25DaGFuZ2UoKSB7DQogICAgICBheGlvcy5nZXQoYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9nZXRSb29tcy8ke3RoaXMuc2VsZWN0ZWR9YCkudGhlbigNCiAgICAgICAgICAocmVzKSA9PiB7DQogICAgICAgICAgICB0aGlzLnJvb21zTGlzdCA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgaWYgKHRoaXMucm9vbXNMaXN0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtLnJvb20ucm9vbUlEID0gdGhpcy5yb29tc0xpc3RbMF0ucm9vbUlEOw0KICAgICAgICAgICAgICB0aGlzLmZvcm0ucm9vbS50eXBlID0gdGhpcy5yb29tc0xpc3RbMF0udHlwZTsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtLnJvb20uYXZhaWxhYmxlID0gdGhpcy5yb29tc0xpc3RbMF0uYXZhaWxhYmxlOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5ub3RlID0gIkN1cnJlbnRseSBubyBhdmFpbGFibGUgcm9vbXMgb2YgdHlwZToiDQogICAgICAgICAgICB9DQogICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgICAgY2FzZSAiU0lOR0xFX1JPT00iOiB7DQogICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVQcmljZSA9IDcwOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGNhc2UgIkRPVUJMRV9ST09NIjogew0KICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlUHJpY2UgPSA5MDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBjYXNlICJBUEFSVE1FTlQiOiB7DQogICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVQcmljZSA9IDEzMDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBjYXNlICJIT05FWU1PT05fU1dFRVQiOiB7DQogICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVQcmljZSA9IDExMDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgfSwNCiAgICBjYWxjdWxhdGVQcmljZSgpIHsNCiAgICAgIHRoaXMuZm9ybS5wcmljZSA9IHRoaXMuc2luZ2xlUHJpY2UgKiB0aGlzLmZvcm0uZHVyYXRpb247DQogICAgICAvL3RoaXMudG90YWxQcmljZSA9IHRoaXMuZm9ybS5wcmljZSAqIHRoaXMuZm9ybS5kdXJhdGlvbjsNCiAgICAgIHRoaXMuc2hvd0NhbGMgPSB0cnVlOw0KICAgIH0sDQogICAgc3VibWl0Rm9ybSgpew0KICAgICAgdGhpcy5mb3JtLnByaWNlID0gdGhpcy5zaW5nbGVQcmljZSogdGhpcy5mb3JtLmR1cmF0aW9uOw0KICAgICAgdGhpcy5zZXREYXRhKCk7DQogICAgICBheGlvcy5wdXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC91cGRhdGVSZXNlcnZhdGlvbiIsIHRoaXMuZm9ybSkudGhlbigNCiAgICAgICAgICAocmVzKT0+ew0KICAgICAgICAgICAgdGhpcy5zdWNjZXNzPXRydWU7DQogICAgICAgICAgICB0aGlzLnBhcmVudERhdGEucmVzZXJ2YXRpb25JRD1yZXMuZGF0YS5yZXNlcnZhdGlvbklEOw0KICAgICAgICAgIH0NCiAgICAgICkNCiAgICB9DQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZm9ybTogew0KICAgICAgICByZXNlcnZhdGlvbklEOiBudWxsLA0KICAgICAgICBwcmljZTogbnVsbCwNCiAgICAgICAgZGF0ZTogbnVsbCwNCiAgICAgICAgZHVyYXRpb246IG51bGwsDQogICAgICAgIGN1c3RvbWVyOiB7DQogICAgICAgICAgY3VzdG9tZXJJZDogbnVsbCwNCiAgICAgICAgICBmaXJzdE5hbWU6IG51bGwsDQogICAgICAgICAgbGFzdE5hbWU6IG51bGwsDQogICAgICAgICAgaWRDYXJkOiBudWxsDQogICAgICAgIH0sDQogICAgICAgIHJvb206IHsNCiAgICAgICAgICByb29tSUQ6IG51bGwsDQogICAgICAgICAgYXZhaWxhYmxlOiB0cnVlLA0KICAgICAgICAgIHR5cGU6IG51bGwNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHJvb21zTGlzdDogW10sDQogICAgICBzZWxlY3RlZDogbnVsbCwNCiAgICAgIG9wdGlvbnM6IFt7dGV4dDogJ0Nob29zZSByb29tIHR5cGUnLCB2YWx1ZTogbnVsbH0sIHsNCiAgICAgICAgdGV4dDogJ1NpbmdsZSByb29tJywNCiAgICAgICAgdmFsdWU6ICdTSU5HTEVfUk9PTScNCiAgICAgIH0sIHt0ZXh0OiAnRG91YmxlIHJvb20nLCB2YWx1ZTogJ0RPVUJMRV9ST09NJ30sDQogICAgICAgIHt0ZXh0OiAnQXBhcnRtZW50JywgdmFsdWU6ICdBUEFSVE1FTlQnfSwge3RleHQ6ICdIb25leW1vb24gU3dlZXQnLCB2YWx1ZTogJ0hPTkVZTU9PTl9TV0VFVCd9XSwNCiAgICAgIHNpbmdsZVByaWNlOiBudWxsLA0KICAgICAgc2hvd0NhbGM6IGZhbHNlLA0KICAgICAgc3VjY2VzczogZmFsc2UNCiAgICB9Ow0KICB9LA0KICBwcm9wczogew0KICAgIHBhcmVudERhdGE6IHsNCiAgICAgIHByaWNlOiBudWxsLA0KICAgICAgZGF0ZTogbnVsbCwNCiAgICAgIGR1cmF0aW9uOiBudWxsLA0KICAgICAgY3VzdG9tZXI6IHsNCiAgICAgICAgY3VzdG9tZXJJZDogbnVsbCwNCiAgICAgICAgZmlyc3ROYW1lOiBudWxsLA0KICAgICAgICBsYXN0TmFtZTogbnVsbCwNCiAgICAgICAgaWRDYXJkOiBudWxsDQogICAgICB9LA0KICAgICAgcm9vbTogew0KICAgICAgICByb29tSUQ6IG51bGwsDQogICAgICAgIGF2YWlsYWJsZTogdHJ1ZSwNCiAgICAgICAgdHlwZTogbnVsbA0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["EditReservation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditReservation.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <b-container fluid=\"sm\" style=\"width:400px\">\r\n\r\n    <b-form v-on:submit.prevent=\"submitForm\">\r\n    <div class=\"form-group\">\r\n      <label for=\"roomType\">Room Type</label>\r\n      <b-form-select id=\"roomType\" v-model=\"selected\" v-on:change=\"onChange()\"\r\n                     :options=\"options\">\r\n      </b-form-select>\r\n    </div>\r\n    <div class=\"mt-3\">Selected: {{ selected }}. Price per Night ${{ singlePrice }}</div>\r\n    <div class=\"mt-3\" v-if=\"roomsList.length===0 && selected\" style=\"color: crimson\">NO {{ selected }}s available right\r\n      now! Please choose another type of room!\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"date\">Date</label>\r\n      <input type=\"date\" class=\"form-control\" id=\"date\" placeholder=\"Please put date\" v-model=\"form.date\" required>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"duration\">Duration</label>\r\n      <input type=\"number\" class=\"form-control\" id=\"duration\" placeholder=\"Please choose how long will be your stay\"\r\n             v-model=\"form.duration\" required>\r\n    </div>\r\n\r\n    <div>\r\n      <button class=\"btn btn-outline-info\" type=\"button\" v-on:click=\"calculatePrice\" style=\"margin-top: 5px\">Calculate\r\n        Total Price\r\n      </button>\r\n    </div>\r\n\r\n    <b-card v-if=\"showCalc\" style=\"margin-top: 10px\">\r\n      <b-row>\r\n        <b-col><strong>You want to make following reservation:</strong></b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col><strong>Date: </strong> {{ form.date }}</b-col>\r\n        <b-col><strong>Room type: </strong> {{ form.room.type }}</b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col><strong>Price per night: </strong> ${{ singlePrice }}</b-col>\r\n        <b-col><strong>Duration: </strong> {{ form.duration }} nights</b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col><strong>Total price: </strong> ${{ form.price }}</b-col>\r\n      </b-row>\r\n    </b-card>\r\n\r\n    <div class=\"form-group\">\r\n      <button class=\"btn btn-info\" style=\"margin-top: 10px\">Update reservation</button>\r\n    </div>\r\n\r\n      <b-alert variant=\"success\" show v-if=\"success\"> You updated successfully reservation with ID: <strong>{{parentData.reservationID}}</strong>\r\n      </b-alert>\r\n  </b-form>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"EditReservation\",\r\n  methods: {\r\n    setData() {\r\n      this.form.reservationID = this.parentData.reservationID;\r\n      this.form.customer.customerId = this.parentData.customer.customerId;\r\n      this.form.customer.firstName = this.parentData.customer.firstName;\r\n      this.form.customer.lastName = this.parentData.customer.lastName;\r\n      this.form.customer.idCard = this.parentData.customer.idCard;\r\n\r\n    },\r\n    onChange() {\r\n      axios.get(`http://localhost:8000/getRooms/${this.selected}`).then(\r\n          (res) => {\r\n            this.roomsList = res.data;\r\n            if (this.roomsList.length > 0) {\r\n              this.form.room.roomID = this.roomsList[0].roomID;\r\n              this.form.room.type = this.roomsList[0].type;\r\n              this.form.room.available = this.roomsList[0].available;\r\n            } else {\r\n              this.note = \"Currently no available rooms of type:\"\r\n            }\r\n            switch (this.selected) {\r\n              case \"SINGLE_ROOM\": {\r\n                this.singlePrice = 70;\r\n                break;\r\n              }\r\n              case \"DOUBLE_ROOM\": {\r\n                this.singlePrice = 90;\r\n                break;\r\n              }\r\n              case \"APARTMENT\": {\r\n                this.singlePrice = 130;\r\n                break;\r\n              }\r\n              case \"HONEYMOON_SWEET\": {\r\n                this.singlePrice = 110;\r\n                break;\r\n              }\r\n              default:\r\n                break;\r\n            }\r\n          })\r\n    },\r\n    calculatePrice() {\r\n      this.form.price = this.singlePrice * this.form.duration;\r\n      //this.totalPrice = this.form.price * this.form.duration;\r\n      this.showCalc = true;\r\n    },\r\n    submitForm(){\r\n      this.form.price = this.singlePrice* this.form.duration;\r\n      this.setData();\r\n      axios.put(\"http://localhost:8000/updateReservation\", this.form).then(\r\n          (res)=>{\r\n            this.success=true;\r\n            this.parentData.reservationID=res.data.reservationID;\r\n          }\r\n      )\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      form: {\r\n        reservationID: null,\r\n        price: null,\r\n        date: null,\r\n        duration: null,\r\n        customer: {\r\n          customerId: null,\r\n          firstName: null,\r\n          lastName: null,\r\n          idCard: null\r\n        },\r\n        room: {\r\n          roomID: null,\r\n          available: true,\r\n          type: null\r\n        }\r\n      },\r\n      roomsList: [],\r\n      selected: null,\r\n      options: [{text: 'Choose room type', value: null}, {\r\n        text: 'Single room',\r\n        value: 'SINGLE_ROOM'\r\n      }, {text: 'Double room', value: 'DOUBLE_ROOM'},\r\n        {text: 'Apartment', value: 'APARTMENT'}, {text: 'Honeymoon Sweet', value: 'HONEYMOON_SWEET'}],\r\n      singlePrice: null,\r\n      showCalc: false,\r\n      success: false\r\n    };\r\n  },\r\n  props: {\r\n    parentData: {\r\n      price: null,\r\n      date: null,\r\n      duration: null,\r\n      customer: {\r\n        customerId: null,\r\n        firstName: null,\r\n        lastName: null,\r\n        idCard: null\r\n      },\r\n      room: {\r\n        roomID: null,\r\n        available: true,\r\n        type: null\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}